services:
  # Backend service accessible as 'backend' within the docker network
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: age-verification-backend
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - WALLET_STORAGE_URL=https://store-us-1.bsvb.tech
      - SERVER_PRIVATE_KEY=31b0f1bf959e41f4e91cb3419ae9cd6c279b787c2c68da989092478f7d90914a
      - BSV_NETWORK=mainnet
    restart: unless-stopped
    networks:
      - age-verification-network

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        - VITE_API_URL=http://localhost:3002
    container_name: age-verification-frontend
    ports:
      - "8080:8080"
    depends_on:
      - backend
    restart: unless-stopped
    networks:
      - age-verification-network

networks:
  age-verification-network:
    driver: bridge
